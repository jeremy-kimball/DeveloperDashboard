@model Dashboard
@{
    var widgetList = ViewBag.widgetBag as IEnumerable<Widget>;
    var dashboardWidgetIds = ViewBag.dashboardWidgetIds as List<int>;
}
<form action="/Dashboard/@Model.Id/Update" method="post">
    <input type="hidden" id="Id" name="Id" value="@Model.Id">
    <div class="form-group">
        <label for="Name">Dashboard Name</label>
        <input type="text" class="form-control" id="Name" name="Name" value="@Model.Name" required />
    </div>
    <div class="form-group">
        @foreach (var widget in widgetList)
        {
        <div>
            <input type="checkbox"
                   name="selectedWidgetIds"
                   value="@widget.Id"
            @(dashboardWidgetIds.Contains(widget.Id) ? "checked" : "") />
            @Html.DisplayFor(_ => widget.Name)
        </div>
        }
    </div>
    <button type="submit" class="btn btn-primary">Update Dashboard</button>
</form>