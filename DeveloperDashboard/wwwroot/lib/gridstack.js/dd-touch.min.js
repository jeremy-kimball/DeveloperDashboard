import{DDManager}from"./dd-manager";const isTouch="undefined"!=typeof window&&"undefined"!=typeof document&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints);class DDTouch{}function simulateMouseEvent(e,t){if(!(1<e.touches.length)){e.cancelable&&e.preventDefault();const n=e.changedTouches[0],o=document.createEvent("MouseEvents");o.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(o)}}function simulatePointerMouseEvent(e,t){e.cancelable&&e.preventDefault();const n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}function touchstart(e){DDTouch.touchHandled||(DDTouch.touchHandled=!0,simulateMouseEvent(e,"mousedown"))}function touchmove(e){DDTouch.touchHandled&&simulateMouseEvent(e,"mousemove")}function touchend(e){var t;DDTouch.touchHandled&&(DDTouch.pointerLeaveTimeout&&(window.clearTimeout(DDTouch.pointerLeaveTimeout),delete DDTouch.pointerLeaveTimeout),t=!!DDManager.dragElement,simulateMouseEvent(e,"mouseup"),t||simulateMouseEvent(e,"click"),DDTouch.touchHandled=!1)}function pointerdown(e){"mouse"!==e.pointerType&&e.target.releasePointerCapture(e.pointerId)}function pointerenter(e){DDManager.dragElement&&"mouse"!==e.pointerType&&simulatePointerMouseEvent(e,"mouseenter")}function pointerleave(e){DDManager.dragElement&&"mouse"!==e.pointerType&&(DDTouch.pointerLeaveTimeout=window.setTimeout(()=>{delete DDTouch.pointerLeaveTimeout,simulatePointerMouseEvent(e,"mouseleave")},10))}export{isTouch,touchstart,touchmove,touchend,pointerdown,pointerenter,pointerleave};