import{Utils}from"./utils";import{DDManager}from"./dd-manager";import{DDElement}from"./dd-element";class DDGridStack{resizable(e,l,d,s){return this._getDDElements(e).forEach(e=>{var t,a,r;"disable"===l||"enable"===l?e.ddResizable&&e.ddResizable[l]():"destroy"===l?e.ddResizable&&e.cleanResizable():"option"===l?e.setupResizable({[d]:s}):(t=e.el.gridstackNode.grid,a=e.el.getAttribute("gs-resize-handles")?e.el.getAttribute("gs-resize-handles"):t.opts.resizable.handles,r=!t.opts.alwaysShowResizeHandle,e.setupResizable({...t.opts.resizable,handles:a,autoHide:r,start:l.start,stop:l.stop,resize:l.resize}))}),this}draggable(e,a,r,l){return this._getDDElements(e).forEach(e=>{var t;"disable"===a||"enable"===a?e.ddDraggable&&e.ddDraggable[a]():"destroy"===a?e.ddDraggable&&e.cleanDraggable():"option"===a?e.setupDraggable({[r]:l}):(t=e.el.gridstackNode.grid,e.setupDraggable({...t.opts.draggable,start:a.start,stop:a.stop,drag:a.drag}))}),this}dragIn(e,t){return this._getDDElements(e).forEach(e=>e.setupDraggable(t)),this}droppable(e,t,a,r){return"function"!=typeof t.accept||t._accept||(t._accept=t.accept,t.accept=e=>t._accept(e)),this._getDDElements(e).forEach(e=>{"disable"===t||"enable"===t?e.ddDroppable&&e.ddDroppable[t]():"destroy"===t?e.ddDroppable&&e.cleanDroppable():"option"===t?e.setupDroppable({[a]:r}):e.setupDroppable(t)}),this}isDroppable(e){return!(!(e&&e.ddElement&&e.ddElement.ddDroppable)||e.ddElement.ddDroppable.disabled)}isDraggable(e){return!(!(e&&e.ddElement&&e.ddElement.ddDraggable)||e.ddElement.ddDraggable.disabled)}isResizable(e){return!(!(e&&e.ddElement&&e.ddElement.ddResizable)||e.ddElement.ddResizable.disabled)}on(e,t,a){return this._getDDElements(e).forEach(e=>e.on(t,e=>{a(e,DDManager.dragElement?DDManager.dragElement.el:e.target,DDManager.dragElement?DDManager.dragElement.helper:null)})),this}off(e,t){return this._getDDElements(e).forEach(e=>e.off(t)),this}_getDDElements(e,t=!0){let a=Utils.getElements(e);if(!a.length)return[];let r=a.map(e=>e.ddElement||(t?DDElement.init(e):null));return t||r.filter(e=>e),r}}export{DDGridStack};